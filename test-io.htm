<!DOCTYPE html>
<html>
<head>
	<title>SocketIO Test</title>
	<style type="text/css">
		body {
			font-family: 'Inconsolata';
		}
	</style>
	<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>
</head>
<body>
	<h1>Hello
	</h1>
	<script type="text/javascript">

		function window_onload() {

			tm = () => new Date().toLocaleTimeString();

			var socket = io("http://localhost:8000/chat");

			socket.on('connect',    () => console.log(`${tm()} :: connected`));

			socket.on('msg',     (msg) => console.log(`${tm()} :: received ${msg}`));
			socket.on('data', on_data);

			function on_data(data) {
				console.log(data);
			}

			socket.emit('msg', 'hey from js', callback = (result) => console.log(`${tm()} :: emit callback result = ${result}`));

		}

		window.addEventListener("load", window_onload);

	</script>
</body>
</html>