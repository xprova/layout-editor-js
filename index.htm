<html>
<head>
    <meta charset="utf-8" />
    <title>LayoutJS Demo</title>
    <script src="js/angular.min.js"></script>
    <script src="js/snap.svg-min.js"></script>
    <script src="js/mousetrap.min.js"></script>
    <script src="js/lodash.js"></script>
    <script src="viewer.js"></script>
    <script src="poets/poets-defs.js"></script>
    <script src="logic-gates/logic-gates-defs.js"></script>
    <script src="app.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" type="text/css" href="poets/poets-styles.css">
    <link rel="stylesheet" type="text/css" href="logic-gates/logic-gates-styles.css">
</head>
<body ng-app="project">
    <svg id="svg1" class="unselectable"></svg>
    <div id="palette" class="palette" ng-controller="paletteController">
        <input id="palette-input" ng-model="query" ng-change="onQueryChange()">
        <div ng-repeat="item in matching_items">
            <div class="item unselectable">
                {{ item.label }}
                <span class="faint">
                    {{ item.sublabel }}
                </span>
            </div>
        </div>
    </div>
    <script type="text/javascript">

        var module = angular.module('project', []);

        function paletteController($scope) {

            var items = [
            { "label": "corePOETS_1_0", "sublabel": "(POETS Core)" },
            { "label": "corePOETS_2_0", "sublabel": "(POETS Core)" },
            { "label": "corePOETS_3_0", "sublabel": "(POETS Core)" },
            { "label": "corePOETS_4_0", "sublabel": "(POETS Core)" },
            { "label": "n2", "sublabel": "(AND Gate)" },
            { "label": "n3", "sublabel": "(AND Gate)" },
            { "label": "n7", "sublabel": "(AND Gate)" },
            { "label": "n8", "sublabel": "(AND Gate)" },
            ]

            var max_results = 6;

            $scope.query = "";
            $scope.matching_items = $scope.items;

            $scope.onQueryChange = function() {

                var find = (item) => item.label.indexOf($scope.query) != -1;

                $scope.matching_items = _
                    .chain(items)
                    .filter(find)
                    .take(max_results)
                    .value();

            }

            $scope.onQueryChange();

        }

        module.controller('paletteController', paletteController);
    </script>
</body>
</html>